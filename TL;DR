
# 1. Activate your env
source myenv/bin/activate

# 2. Install deps
pip install -r requirements.txt

# 3. Build the FAISS index from Malcolm (last 7 days, GPU)
python build_rag_index.py --days 7 --batch-size 1000 --device cuda

# 4. Run the FastAPI backend and mistrall
ollama run mistral  # ollama and mistral must be installed and configured before all this
uvicorn app:app --host 0.0.0.0 --port 8080 --reload

# 5. Check health
curl http://127.0.0.1:8080/healthz

# 6. Test ask endpoint
curl -s -X POST http://127.0.0.1:8080/ask \
  -H "Content-Type: application/json" \
  -d '{"question":"Quelles IP sources gÃ©nÃ¨rent le plus d alertes critiques ?","days":7,"top_k":8}' | jq

# 7. Run the Streamlit UI
streamlit run ui.py

ðŸ¤– Example Questions 
# you may notice that the questions are in French, feel free to ask in English too but modify the prompt in app.py "build_prompt" function
Analyse rÃ©seau : 

Â« Quelles IP sources gÃ©nÃ¨rent le plus dâ€™alertes critiques ? Â»

Â« Quels domaines DNS suspects ont Ã©tÃ© rÃ©solus ces 10 derniers jours ? Â»

Suricata / IDS :

Â« Quels types dâ€™attaques Suricata a dÃ©tectÃ©s rÃ©cemment ? Â»

Â« Quelles signatures dâ€™alerte apparaissent le plus souvent ? Â»

Zeek / Protocoles :

Â« Quelles connexions TLS utilisent des certificats suspects ? Â»

Â« Quels User-Agent HTTP suspects apparaissent dans les logs ? Â»

Arkime / Sessions :

Â« Quelles sont les top IP externes contactÃ©es par le rÃ©seau interne ? Â»

Â« Quelles durÃ©es de sessions anormales ont Ã©tÃ© observÃ©es ? Â»
